<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background: linear-gradient(135deg, #1a1e24, #2d3436);
            font-family: 'Courier New', monospace;
        }
        
        .nav a {
            color: #ffb8b8;
        }
        
        .nav a.active {
            background: #ff4757;
            color: white;
        }
        
        .container.code-container {
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid #ff6b81;
            box-shadow: 0 0 40px rgba(255, 71, 87, 0.3);
            color: #dfe6e9;
        }
        
        .terminal {
            background: #0a0c0e;
            border-radius: 16px;
            padding: 30px;
            border: 1px solid #ff6b81;
            box-shadow: 0 0 30px rgba(255, 107, 129, 0.2);
            font-family: 'Courier New', monospace;
            margin: 20px 0;
        }
        
        .terminal-header {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ff6b81;
        }
        
        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff5f56;
        }
        
        .terminal-dot:nth-child(2) {
            background: #ffbd2e;
        }
        
        .terminal-dot:nth-child(3) {
            background: #27c93f;
        }
        
        .code-line {
            color: #b2bec3;
            font-size: 18px;
            line-height: 1.8;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
            border-right: 2px solid transparent;
            white-space: pre-wrap;
        }
        
        .code-line.typing {
            border-right: 2px solid #ff6b81;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { border-color: #ff6b81; }
            50% { border-color: transparent; }
        }
        
        .countdown {
            font-size: 80px;
            font-weight: 900;
            color: #ff6b81;
            text-align: center;
            margin: 40px 0;
            text-shadow: 0 0 30px #ff4757;
            font-family: 'Courier New', monospace;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .heart-canvas-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }
        
        #heartCanvas {
            background: #0a0c0e;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 71, 87, 0.2);
            max-width: 100%;
            height: auto;
        }
        
        .secret-message {
            text-align: center;
            font-size: 28px;
            color: #ffb8b8;
            margin-top: 30px;
            font-weight: 700;
            text-shadow: 0 0 20px #ff4757;
            letter-spacing: 4px;
            animation: fadeIn 2s ease;
        }
        
        .restart-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 60px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 30px;
            border: 2px solid white;
            transition: 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        
        .restart-btn:hover {
            transform: scale(1.1);
            background: #ff6b81;
            box-shadow: 0 0 30px #ff4757;
        }
        
        .hidden {
            display: none;
        }
        
        .stage-indicator {
            color: #ffb8b8;
            font-size: 16px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="nav">
        <a href="index.html">üè† –í—Å—Ç—Ä–µ—á–∞</a>
        <a href="quiz.html">üß† –ò—Å–ø—ã—Ç–∞–Ω–∏–µ</a>
        <a href="music.html">üéµ –í–æ–ª–Ω–∞</a>
        <a href="wheel.html">üé° –§–æ—Ä—Ç—É–Ω–∞</a>
        <a href="code.html" class="active">üíª –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥</a>
    </div>

    <div class="container code-container">
        <h2 style="color: #ffb8b8; text-align: center;">üíª –°–ï–ö–†–ï–¢–ù–´–ô –ö–û–î</h2>
        
        <div id="terminal" class="terminal">
            <div class="terminal-header">
                <span class="terminal-dot"></span>
                <span class="terminal-dot"></span>
                <span class="terminal-dot"></span>
            </div>
            <div id="codeDisplay"></div>
        </div>
        
        <div id="countdownDisplay" class="countdown hidden"></div>
        
        <div id="heartContainer" class="heart-canvas-container hidden">
            <canvas id="heartCanvas" width="400" height="400"></canvas>
            <div id="finalMessage" class="secret-message hidden"></div>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button id="restartBtn" class="restart-btn hidden" onclick="location.reload()">üîÑ –ï—â—ë —Ä–∞–∑</button>
        </div>
        <div id="stageIndicator" class="stage-indicator" style="text-align: center;"></div>
    </div>

    <script>
        // –ö–û–î, –ö–û–¢–û–†–´–ô –ë–£–î–ï–¢ –ü–ï–ß–ê–¢–ê–¢–¨–°–Ø
        const codeLines = [
            "function createHeart() {",
            "  const love = '–î–ª—è —Ç–µ–±—è ‚ù§Ô∏è';",
            "  const memory = new Date('2023-06-14');",
            "  const status = '–≤–ª—é–±–ª—ë–Ω';",
            "  ",
            "  while(true) {",
            "    console.log('–Ø —Ç–µ–±—è –ª—é–±–ª—é');",
            "    // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª —Å—á–∞—Å—Ç—å—è",
            "  }",
            "}",
            "",
            "createHeart();"
        ];

        let currentLine = 0;
        let currentChar = 0;
        let typingInterval;
        let countdownInterval;
        let heartAnimation;
        
        const codeDisplay = document.getElementById('codeDisplay');
        const countdownDisplay = document.getElementById('countdownDisplay');
        const heartContainer = document.getElementById('heartContainer');
        const heartCanvas = document.getElementById('heartCanvas');
        const finalMessage = document.getElementById('finalMessage');
        const stageIndicator = document.getElementById('stageIndicator');
        const restartBtn = document.getElementById('restartBtn');

        // –¢–ò–ü–ê–ï–ú –ö–û–î
        function typeCode() {
            stageIndicator.innerHTML = 'üìü –ö–æ–º–ø–∏–ª—è—Ü–∏—è...';
            
            if (currentLine < codeLines.length) {
                if (currentChar === 0) {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'code-line typing';
                    lineDiv.id = `line-${currentLine}`;
                    codeDisplay.appendChild(lineDiv);
                }
                
                const lineElement = document.getElementById(`line-${currentLine}`);
                const line = codeLines[currentLine];
                
                if (currentChar < line.length) {
                    lineElement.innerHTML += line[currentChar];
                    currentChar++;
                } else {
                    lineElement.classList.remove('typing');
                    currentLine++;
                    currentChar = 0;
                }
            } else {
                // –ö–û–î –ù–ê–ü–ò–°–ê–ù ‚Äî –ó–ê–ü–£–°–ö–ê–ï–ú –û–¢–°–ß–Å–¢
                clearInterval(typingInterval);
                stageIndicator.innerHTML = '‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞';
                setTimeout(startCountdown, 1000);
            }
        }

        // –û–¢–°–ß–Å–¢ 3...2...1...
        function startCountdown() {
            stageIndicator.innerHTML = '‚è≥ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã...';
            codeDisplay.parentElement.style.opacity = '0.5';
            
            let count = 3;
            countdownDisplay.classList.remove('hidden');
            
            countdownInterval = setInterval(() => {
                countdownDisplay.innerHTML = count;
                
                if (count === 0) {
                    clearInterval(countdownInterval);
                    countdownDisplay.classList.add('hidden');
                    startDrawingHeart();
                }
                count--;
            }, 1000);
        }

        // –†–ò–°–£–ï–ú –°–ï–†–î–¶–ï –ü–û–°–¢–ï–ü–ï–ù–ù–û
        function startDrawingHeart() {
            stageIndicator.innerHTML = '‚ù§Ô∏è –†–∏—Å—É—é —Å–µ—Ä–¥—Ü–µ...';
            heartContainer.classList.remove('hidden');
            
            const ctx = heartCanvas.getContext('2d');
            const width = heartCanvas.width;
            const height = heartCanvas.height;
            
            let progress = 0;
            
            function drawHeart(progress) {
                ctx.clearRect(0, 0, width, height);
                
                // –§–æ–Ω
                ctx.fillStyle = '#0a0c0e';
                ctx.fillRect(0, 0, width, height);
                
                // –†–∏—Å—É–µ–º —Å–µ—Ä–¥—Ü–µ –ø–æ —Ç–æ—á–∫–∞–º
                ctx.save();
                ctx.translate(width/2, height/2 - 20);
                ctx.scale(2, 2);
                
                ctx.beginPath();
                ctx.strokeStyle = '#ff4757';
                ctx.lineWidth = 3;
                
                // –£—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞
                for (let t = 0; t <= progress * Math.PI * 2; t += 0.05) {
                    const x = 16 * Math.pow(Math.sin(t), 3);
                    const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                    
                    if (t === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                
                ctx.stroke();
                
                // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∑–∞–ª–∏–≤–∫–∞ (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è)
                if (progress > 0.8) {
                    ctx.fillStyle = 'rgba(255, 71, 87, ' + ((progress - 0.8) * 5) + ')';
                    ctx.fill();
                }
                
                ctx.restore();
                
                // –ü–æ–¥–ø–∏—Å—å
                ctx.font = '14px "Courier New", monospace';
                ctx.fillStyle = '#b2bec3';
                ctx.textAlign = 'center';
                ctx.fillText('for (let day = 0; day < forever; day++)', width/2, height - 30);
                ctx.fillStyle = '#ffb8b8';
                ctx.fillText('{ love++; }', width/2, height - 10);
            }
            
            let frame = 0;
            function animateHeart() {
                progress = frame / 100;
                drawHeart(Math.min(progress, 1));
                
                if (progress < 1) {
                    frame++;
                    requestAnimationFrame(animateHeart);
                } else {
                    // –°–µ—Ä–¥—Ü–µ –≥–æ—Ç–æ–≤–æ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    finalMessage.classList.remove('hidden');
                    finalMessage.innerHTML = '‚ù§Ô∏è LOVE ‚ù§Ô∏è';
                    stageIndicator.innerHTML = '‚ù§Ô∏è –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ';
                    restartBtn.classList.remove('hidden');
                }
            }
            
            animateHeart();
        }

        // –°–¢–ê–†–¢
        window.onload = function() {
            typingInterval = setInterval(typeCode, 100);
        };
    </script>
</body>
</html>